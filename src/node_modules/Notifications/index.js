import { createContext, useContext } from 'react'
import { useNotifications, Notifications } from './Notifications'

const NotificationsContext = createContext()

export function NotificationsProvider({ children }) {
  const { messages, discard, notify } = useNotifications()
  return (
    <NotificationsContext.Provider value={notify}>
      <Notifications value={messages} onDiscard={discard} />
      {children}
    </NotificationsContext.Provider>
  )
}

export function useNotify() {
  const notify = useContext(NotificationsContext)
  if (!notify) {
    throw new Error('missing NotificationsProvider')
  }
  return notify
}
